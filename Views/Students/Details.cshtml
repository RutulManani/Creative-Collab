@model EduFitMart.Models.School.Student

@{
    ViewData["Title"] = "Student Details";
}

<h1>Student Details</h1>

<div class="mb-4">
    <h4>@Model.Name</h4>
    <p><strong>Email:</strong> @Model.Email</p>
</div>

<!-- Enrollments -->
<div class="card mb-3">
    <div class="card-header bg-primary text-white">
        <h5>Enrollments</h5>
    </div>
    <div class="card-body">
        @if (Model.Enrollments.Any())
        {
            <ul class="list-group">
                @foreach (var enrollment in Model.Enrollments)
                {
                    <li class="list-group-item">
                        Enrolled in: @enrollment.Course?.CourseName (ID: @enrollment.EnrollmentId)
                    </li>
                }
            </ul>
        }
        else
        {
            <p class="text-muted">No enrollments found.</p>
        }
    </div>
</div>

<!-- Workouts -->
<div class="card mb-3">
    <div class="card-header bg-success text-white d-flex justify-content-between align-items-center">
        <h5>Assigned Workouts</h5>
        <a asp-controller="StudentWorkouts" asp-action="Create" asp-route-studentId="@Model.StudentId" class="btn btn-sm btn-light">+ Add</a>
    </div>
    <div class="card-body">
        @if (Model.StudentWorkouts.Any())
        {
            <ul class="list-group">
                @foreach (var sw in Model.StudentWorkouts)
                {
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <span>
                            @sw.Workout?.Name — @sw.Workout?.Date.ToShortDateString() (@sw.Workout?.Duration mins)
                        </span>
                        <form asp-controller="StudentWorkouts" asp-action="Delete" method="post" class="mb-0">
                            <input type="hidden" name="studentId" value="@Model.StudentId" />
                            <input type="hidden" name="workoutId" value="@sw.WorkoutId" />
                            <button type="submit" class="btn btn-sm btn-danger">Remove</button>
                        </form>
                    </li>
                }
            </ul>
        }
        else
        {
            <p class="text-muted">No workouts assigned.</p>
        }
    </div>
</div>

<!-- Orders -->
<div class="card mb-3">
    <div class="card-header bg-dark text-white">
        <h5>Orders</h5>
    </div>
    <div class="card-body">
        @if (Model.Orders.Any())
        {
            <ul class="list-group">
                @foreach (var order in Model.Orders)
                {
                    <li class="list-group-item">
                        Order #@order.OrderId — @order.OrderDate.ToShortDateString()
                    </li>
                }
            </ul>
        }
        else
        {
            <p class="text-muted">No orders placed.</p>
        }
    </div>
</div>

<div>
    <a asp-action="Edit" asp-route-id="@Model.StudentId" class="btn btn-primary">Edit Student</a> |
    <a asp-action="Index" class="btn btn-secondary">Back to List</a>
</div>